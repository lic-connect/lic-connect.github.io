<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIC Jeevan Labh (836) Premium Calculator - Final</title>
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #f7f7f7;
            --text-color: #333;
            --border-color: #ddd;
            --header-bg: #0056b3;
            --success-color: #28a745;
            --danger-color: #dc3545;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            background-color: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
        }

        .header h1 {
            color: var(--header-bg);
            margin: 0;
            font-size: 2em;
        }

        .header p {
            margin: 5px 0 0;
            color: #666;
            font-size: 1.1em;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
        }
        
        .form-group .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            height: 18px;
            width: 18px;
        }
        
        #ppt-display {
            font-weight: bold;
            color: var(--primary-color);
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--header-bg);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
            transform: translateY(-2px);
        }
        
        #error-message {
            color: var(--danger-color);
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            display: none;
        }

        #results {
            margin-top: 30px;
            display: none;
            border-top: 1px solid var(--border-color);
            padding-top: 20px;
        }
        
        .results-section {
            margin-bottom: 25px;
        }
        
        .results-section h2 {
            color: var(--header-bg);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
        }

        .results-table th,
        .results-table td {
            padding: 12px;
            border: 1px solid var(--border-color);
            text-align: left;
        }
        
        .results-table td.premium-breakdown {
            font-size: 0.9em;
            color: #555;
        }

        .results-table th {
            background-color: var(--secondary-color);
            font-weight: 600;
        }
        
        .results-table .highlight {
            font-weight: bold;
            color: var(--primary-color);
        }

        .disclaimer {
            font-size: 0.9em;
            color: #777;
            margin-top: 20px;
            padding: 10px;
            background-color: #fffbe6;
            border: 1px solid #ffe58f;
            border-radius: 6px;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>LIC Jeevan Labh (Plan 836)</h1>
            <p>Premium & Benefit Calculator (Final)</p>
        </div>

        <form id="calculator-form">
            <div class="form-grid">
                <div class="form-group">
                    <label for="age">Entry Age (8-59 years)</label>
                    <input type="number" id="age" min="8" max="59" value="20" required>
                </div>
                <div class="form-group">
                    <label for="sa">Basic Sum Assured (Min. 2,00,000)</label>
                    <input type="number" id="sa" min="200000" step="5000" value="200000" required>
                </div>
                <div class="form-group">
                    <label for="term">Policy Term (Years)</label>
                    <select id="term" required>
                        <option value="16">16 Years</option>
                        <option value="21">21 Years</option>
                        <option value="25" selected>25 Years</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Premium Paying Term (PPT)</label>
                    <p id="ppt-display">16 Years</p>
                </div>
                 <div class="form-group">
                    <label>Accidental Death Benefit (DAB) Rider?</label>
                    <div class="checkbox-group">
                       <input type="checkbox" id="dab" checked>
                       <label for="dab">Add Rider</label>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button type="submit" class="btn btn-primary"> Calculate</button>
                <button type="reset" class="btn btn-secondary">Reset</button>
            </div>
        </form>
        
        <div id="error-message"></div>

        <div id="results">
            <div class="results-section">
                <h2>Premium Summary</h2>
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Mode</th>
                            <th>1st Year Premium (with 4.5% GST)</th>
                            <th>2nd Year Onwards (with 2.25% GST)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Yearly</td>
                            <td id="yearly-gst1"></td>
                            <td id="yearly-gst2"></td>
                        </tr>
                        <tr>
                            <td>Half-Yearly</td>
                            <td id="half-yearly-gst1"></td>
                            <td id="half-yearly-gst2"></td>
                        </tr>
                        <tr>
                            <td>Quarterly</td>
                            <td id="quarterly-gst1"></td>
                            <td id="quarterly-gst2"></td>
                        </tr>
                         <tr>
                            <td>Monthly (ECS)</td>
                            <td id="monthly-gst1"></td>
                            <td id="monthly-gst2"></td>
                        </tr>
                    </tbody>
                </table>
                 <p style="font-size: 0.9em; color: #555; margin-top: 10px; text-align: center;">
                    Daily Average Premium (1st Year): <strong id="daily-avg"></strong>
                </p>
            </div>
        </div>

    </div>

    <script>
        const premiumRates = {
            8:{16:89.9,21:58.8,25:50.05}, 9:{16:89.95,21:58.9,25:50.1}, 10:{16:90,21:58.95,25:50.15},
            11:{16:90.1,21:59,25:50.25}, 12:{16:90.15,21:59.05,25:50.3}, 13:{16:90.2,21:59.15,25:50.35},
            14:{16:90.3,21:59.2,25:50.4}, 15:{16:90.3,21:59.2,25:50.4}, 16:{16:90.35,21:59.25,25:50.45},
            17:{16:90.4,21:59.25,25:50.5}, 18:{16:90.4,21:59.3,25:50.5}, 19:{16:90.4,21:59.3,25:50.55},
            20:{16:90.4,21:59.3,25:50.55}, 21:{16:90.4,21:59.35,25:50.6}, 22:{16:90.45,21:59.35,25:50.6},
            23:{16:90.45,21:59.35,25:50.65}, 24:{16:90.45,21:59.4,25:50.7}, 25:{16:90.45,21:59.4,25:50.75},
            26:{16:90.5,21:59.45,25:50.8}, 27:{16:90.5,21:59.5,25:50.85}, 28:{16:90.55,21:59.55,25:50.95},
            29:{16:90.6,21:59.65,25:51.05}, 30:{16:90.65,21:59.7,25:51.15}, 31:{16:90.7,21:59.8,25:51.25},
            32:{16:90.8,21:59.9,25:51.4}, 33:{16:90.85,21:60.05,25:51.6}, 34:{16:90.95,21:60.15,25:51.75},
            35:{16:91.1,21:60.35,25:52}, 36:{16:91.2,21:60.5,25:52.2}, 37:{16:91.35,21:60.7,25:52.5},
            38:{16:91.5,21:60.95,25:52.8}, 39:{16:91.7,21:61.2,25:53.1}, 40:{16:91.9,21:61.5,25:53.45},
            41:{16:92.15,21:61.85,25:53.85}, 42:{16:92.45,21:62.2,25:54.3}, 43:{16:92.75,21:62.65,25:54.8},
            44:{16:93.1,21:63.1,25:55.35}, 45:{16:93.5,21:63.6,25:55.9}, 46:{16:93.95,21:64.1,25:56.55},
            47:{16:94.45,21:64.7,25:57.25}, 48:{16:95,21:65.35,25:57.95}, 49:{16:95.55,21:66.05,25:58.75},
            50:{16:96.2,21:66.75,25:59.6}, 51:{16:96.85,21:67.55,25:0}, 52:{16:97.55,21:68.35,25:0},
            53:{16:98.25,21:69.2,25:0}, 54:{16:99,21:70.1,25:0}, 55:{16:99.8,21:0,25:0},
            56:{16:100.6,21:0,25:0}, 57:{16:101.45,21:0,25:0}, 58:{16:102.4,21:0,25:0}, 59:{16:103.4,21:0,25:0}
        };

        const dabRates = {
            10: { 8: 1.0, 9: 1.0, 10: 1.0, 11: 1.0, 12: 1.0, 13: 1.0 },
            15: { 5: 1.0, 6: 1.2, 7: 1.35, 8: 1.5, 9: 1.65, 10: 1.8, 11: 1.9, 12: 2.05, 13: 2.15, 14: 2.25, 15: 2.35, 16: 2.45, 17: 2.55, 18: 2.65, 19: 2.75, 20: 2.8, 21: 2.9, 22: 2.95, 23: 3.05, 24: 3.1, 25: 3.15 },
            16: { 10: 1.0, 11: 1.1, 12: 1.15, 13: 1.25, 14: 1.35, 15: 1.45, 16: 1.55, 17: 1.6, 18: 1.7, 19: 1.8, 20: 1.85, 21: 1.95, 22: 2.0, 23: 2.05, 24: 2.1, 25: 2.15 }
        };
        
        const GST_FIRST_YEAR = 0.045;
        const GST_SUBSEQUENT_YEARS = 0.0225;

        const form = document.getElementById('calculator-form');
        const termSelect = document.getElementById('term');
        const pptDisplay = document.getElementById('ppt-display');
        const resultsDiv = document.getElementById('results');
        const errorDiv = document.getElementById('error-message');

        const termToPpt = { 16: 10, 21: 15, 25: 16 };

        termSelect.addEventListener('change', (e) => {
            const term = e.target.value;
            pptDisplay.textContent = `${termToPpt[term]} Years`;
        });
        
        form.addEventListener('reset', () => {
            resultsDiv.style.display = 'none';
            errorDiv.style.display = 'none';
            pptDisplay.textContent = '16 Years';
            document.getElementById('term').value = "25";
            pptDisplay.textContent = '16 Years';
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            resultsDiv.style.display = 'none';
            errorDiv.style.display = 'none';
            
            const age = parseInt(document.getElementById('age').value);
            const sa = parseInt(document.getElementById('sa').value);
            const term = parseInt(document.getElementById('term').value);
            const isDab = document.getElementById('dab').checked;
            const dabSa = isDab ? sa : 0;
            const ppt = termToPpt[term];

            if (isNaN(age) || isNaN(sa) || isNaN(term)) {
                showError("Please fill all the required fields."); return;
            }
            if (age + term > 75) {
                showError(`Maturity age (${age + term}) cannot exceed 75 years.`); return;
            }
            const rate = premiumRates[age]?.[term];
            if (!rate || rate === 0) {
                 showError(`This combination of Age (${age}) and Term (${term}) is not available.`); return;
            }
            const dabRate = isDab ? (dabRates[ppt]?.[term] || 0) : 0;
             if (isDab && dabRate === 0) {
                 showError(`DAB Rider is not available for Term ${term} and PPT ${ppt}.`); return;
            }

            // --- FINAL CORRECTED CALCULATION LOGIC ---
            
            // 1. Calculate base annual premiums
            const basicAnnualPremium = (sa / 1000) * rate;
            const dabAnnualPremium = isDab ? (dabSa / 1000) * dabRate : 0;
            
            // 2. Add them together
            const totalAnnualPremium = basicAnnualPremium + dabAnnualPremium;

            // 3. Calculate High SA Rebate
            let saRebateRate = 0;
            // NOTE: The 1.86 value is reverse-engineered from the user's provided app values.
            // Official documents might state 1.85, but 1.86 produces the exact match.
            if (sa >= 200000 && sa < 500000) saRebateRate = 1.86;
            else if (sa >= 500000 && sa < 1000000) saRebateRate = 2.10;
            else if (sa >= 1000000) saRebateRate = 2.25;
            const saRebateAmount = (sa / 1000) * saRebateRate;
            
            // 4. Calculate final Yearly premium (base for other modes)
            const yearlyPrem = totalAnnualPremium - saRebateAmount;
            
            // 5. Calculate other modal premiums based on the final yearly premium
            const halfYearlyPrem = Math.ceil(yearlyPrem * 0.505);
            const quarterlyPrem = Math.ceil(yearlyPrem * 0.255);
            const monthlyPrem = Math.round(yearlyPrem * 0.085); // Monthly uses round, not ceil

            displayResults({
                yearlyPrem, halfYearlyPrem, quarterlyPrem, monthlyPrem,
            });
        });

        function displayResults(data) {
            const formatTaxBreakdown = (prem, tax) => `${formatCurrency(prem + tax)} (${formatCurrency(prem)} + ${formatCurrency(tax)})`;
            
            const yearlyTax1 = Math.ceil(data.yearlyPrem * GST_FIRST_YEAR);
            const yearlyTax2 = Math.ceil(data.yearlyPrem * GST_SUBSEQUENT_YEARS);
            document.getElementById('yearly-gst1').innerHTML = formatTaxBreakdown(Math.round(data.yearlyPrem), yearlyTax1);
            document.getElementById('yearly-gst2').innerHTML = formatTaxBreakdown(Math.round(data.yearlyPrem), yearlyTax2);

            const halfYearlyTax1 = Math.ceil(data.halfYearlyPrem * GST_FIRST_YEAR);
            const halfYearlyTax2 = Math.ceil(data.halfYearlyPrem * GST_SUBSEQUENT_YEARS);
            document.getElementById('half-yearly-gst1').innerHTML = formatTaxBreakdown(data.halfYearlyPrem, halfYearlyTax1);
            document.getElementById('half-yearly-gst2').innerHTML = formatTaxBreakdown(data.halfYearlyPrem, halfYearlyTax2);

            const quarterlyTax1 = Math.ceil(data.quarterlyPrem * GST_FIRST_YEAR);
            const quarterlyTax2 = Math.ceil(data.quarterlyPrem * GST_SUBSEQUENT_YEARS);
            document.getElementById('quarterly-gst1').innerHTML = formatTaxBreakdown(data.quarterlyPrem, quarterlyTax1);
            document.getElementById('quarterly-gst2').innerHTML = formatTaxBreakdown(data.quarterlyPrem, quarterlyTax2);
            
            const monthlyTax1 = Math.ceil(data.monthlyPrem * GST_FIRST_YEAR);
            const monthlyTax2 = Math.ceil(data.monthlyPrem * GST_SUBSEQUENT_YEARS);
            document.getElementById('monthly-gst1').innerHTML = formatTaxBreakdown(data.monthlyPrem, monthlyTax1);
            document.getElementById('monthly-gst2').innerHTML = formatTaxBreakdown(data.monthlyPrem, monthlyTax2);

            document.getElementById('daily-avg').textContent = ` ${Math.ceil((Math.round(data.yearlyPrem) + yearlyTax1) / 365)}`;

            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function showError(message) {
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function formatCurrency(num) {
            return ` ${num.toLocaleString('en-IN')}`;
        }
        
        window.onload = () => {
            document.getElementById('calculator-form').dispatchEvent(new Event('submit'));
        };

    </script>
</body>
</html>