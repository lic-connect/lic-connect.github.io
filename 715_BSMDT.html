<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LIC Plan 715 Premium Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f9fa; margin: 0; padding: 20px; padding-bottom: 120px; /* Add padding to prevent content from hiding behind the button */ }
    .container { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 8px rgba(0,0,0,0.1); max-width: 700px; margin:auto; }
    h1 { text-align:center; color: #333; }
    label { font-weight:bold; margin-top:10px; display:block; }
    input[type="number"], input[type="text"] { width:100%; padding:10px; margin-bottom:10px; box-sizing: border-box; }
    button { width:100%; padding:15px; background:#27ae60; color:#fff; font-size:16px; border:none; border-radius: 5px; cursor:pointer; }
    button:hover { background:#219150; }
    table { width:100%; margin-top:20px; border-collapse:collapse; }
    th, td { border:1px solid #ccc; padding:10px; text-align:center; }
    th { background:#e8f5e9; }
    
    /* Styling for the DAB checkbox container */
    .checkbox-container {
        display: flex;
        align-items: center;
        margin: 15px 0;
        background-color: #f7f7f7;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
    }
    .checkbox-container input[type="checkbox"] {
        width: auto;
        height: 18px;
        width: 18px;
        margin: 0 12px 0 5px;
        cursor: pointer;
    }
    .checkbox-container label {
        margin: 0;
        font-weight: normal;
        color: #333;
    }
    
    .actions-container {
        display: flex;      /* Aligns items horizontally */
        gap: 15px;          /* Creates space between the buttons */
        margin-top: 20px;
    }

    /* Style for the rider button */
    .rider-btn {
        background: linear-gradient(145deg, #d9534f, #c9302c);
        color: white;
        font-family: Arial, sans-serif;
        font-size: 16px;
        font-weight: bold;
        border: none;
        border-radius: 10px;
        padding: 15px 30px;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(201, 48, 44, 0.4);
        transition: all 0.3s ease;
    }
    .rider-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(201, 48, 44, 0.5);
    }
    
    /* Pop-up Modal Styles */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: none; /* Hidden by default */
        align-items: center;
        justify-content: center;
        z-index: 2000;
    }
    .modal-content {
        background: #fff;
        padding: 30px;
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        position: relative;
    }
    .modal-close-btn {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 28px;
        font-weight: bold;
        color: #888;
        cursor: pointer;
    }
    #modal-title { margin-top: 0; color: #c9302c; }
    #modal-body { font-size: 1.1em; color: #333; }
  </style>
</head>
<body>
  <div class="container">
    <h1>LIC Plan 715 Premium Calculator</h1>

    <label for="age">Age</label>
    <input type="number" id="age" value="30" min="18" max="50" />

    <label for="term">Policy Term</label>
    <input type="number" id="term" value="20" min="13" max="35" />

    <label for="sumAssured">Sum Assured</label>
    <input type="number" id="sumAssured" value="2500000" step="10000" />

    <div class="checkbox-container">
      <input type="checkbox" id="dab" />
      <label for="dab">Include Accidental Benefit (DAB) Rider</label>
    </div>

    <label for="ppt">Premium Paying Term</label>
    <input type="text" id="ppt" disabled />

      <!-- START: New Button Container -->
    <div class="actions-container">
      <button onclick="calculate()">Calculate Premium</button>
      <button id="term-rider-btn" class="rider-btn">Know Your Term Rider Premium</button>
    </div>
    <!-- END: New Button Container -->

    <div id="results"></div>
  </div>

  <!-- Button and Modal HTML -->

  <div id="premium-modal" class="modal-overlay">
    <div class="modal-content">
        <span class="modal-close-btn">Ã—</span>
        <h2 id="modal-title"></h2>
        <div id="modal-body"></div>
    </div>
  </div>

<script>
const premiumRates = {
    18:{15:82.3,16:76.8,17:72,18:67.6,19:63.8,20:60.3,21:57.2,22:54.4,23:51.8,24:49.5,25:47.3,26:45.4,27:43.8,28:41.9,29:40.3,30:38.9,31:37.5,32:36.3,33:35.1,34:34,35:33},19:{15:82.6,16:77,17:72.2,18:67.8,19:64,20:60.5,21:57.4,22:54.6,23:52,24:49.7,25:47.5,26:45.5,27:43.7,28:42,29:40.5,30:39,31:37.7,32:36.4,33:35.2,34:34.2,35:33.1},20:{15:82.8,16:77.3,17:72.4,18:68.1,19:64.2,20:60.7,21:57.6,22:54.8,23:52.2,24:49.8,25:47.7,26:45.7,27:43.9,28:42.2,29:40.6,30:39.2,31:37.8,32:36.6,33:35.4,34:34.3,35:33.3},21:{15:83.1,16:77.5,17:72.6,18:68.3,19:64.4,20:60.9,21:57.8,22:55,23:52.4,24:50,25:47.9,26:45.9,27:44,28:42.4,29:40.8,30:39.3,31:38,32:36.7,33:35.6,34:34.5,35:33.4},22:{15:83.3,16:77.8,17:72.9,18:68.5,19:64.6,20:61.2,21:58,22:55.2,23:52.6,24:50.2,25:48.1,26:46.1,27:44.2,28:42.5,29:41,30:39.5,31:38.2,32:36.9,33:35.7,34:34.6,35:33.6},23:{15:83.6,16:78,17:73.1,18:68.8,19:64.9,20:61.4,21:58.2,22:55.4,23:52.8,24:50.4,25:48.3,26:46.3,27:44.4,28:42.7,29:41.1,30:39.7,31:38.3,32:37.1,33:35.9,34:34.8,35:33.8},24:{15:83.9,16:78.3,17:73.4,18:69,19:65.1,20:61.6,21:58.5,22:55.6,23:53,24:50.7,25:48.5,26:46.5,27:44.6,28:42.9,29:41.3,30:39.9,31:38.5,32:37.3,33:36.1,34:35,35:34},25:{15:84.2,16:78.6,17:73.7,18:69.3,19:65.4,20:61.9,21:58.7,22:55.9,23:53.3,24:50.9,25:48.7,26:46.7,27:44.8,28:43.1,29:41.6,30:40.1,31:38.7,32:37.5,33:36.3,34:35.2,35:34.2},26:{15:84.6,16:78.9,17:74,18:69.6,19:65.7,20:62.2,21:59,22:56.1,23:53.5,24:51.1,25:48.9,26:46.9,27:45.1,28:43.4,29:41.8,30:40.3,31:39,32:37.7,33:36.5,34:35.4,35:34.4},27:{15:84.9,16:79.3,17:74.3,18:69.9,19:66,20:62.5,21:59.3,22:56.4,23:53.8,24:51.4,25:49.2,26:47.2,27:45.3,28:43.6,29:42,30:40.6,31:39.2,32:37.9,33:36.8,34:35.7,35:34.7},28:{15:85.3,16:79.7,17:74.7,18:70.3,19:66.3,20:62.8,21:59.5,22:56.7,23:54.1,24:51.7,25:49.5,26:47.5,27:45.6,28:43.9,29:42.3,30:40.8,31:39.5,32:38.2,33:37,34:36,35:35.1},29:{15:85.7,16:80.1,17:75.1,18:70.6,19:66.7,20:63.1,21:59.9,22:57,23:54.4,24:52,25:49.6,26:47.7,27:45.9,28:44.2,29:42.6,30:41.1,31:39.8,32:38.5,33:37.3,34:36.3,35:35.2},30:{15:86.2,16:80.5,17:75.5,18:71,19:67,20:63.5,21:60.3,22:57.4,23:54.7,24:52.3,25:50.1,26:48.1,27:46.2,28:44.5,29:42.9,30:41.4,31:40.1,32:38.8,33:37.6,34:36.6,35:35.6},31:{15:86.6,16:80.9,17:75.9,18:71.4,19:67.4,20:63.9,21:60.6,22:57.7,23:55.1,24:52.6,25:50.4,26:48.4,27:46.5,28:44.8,29:43.2,30:41.7,31:40.3,32:39.1,33:37.9,34:36.9,35:35.9},32:{15:87.1,16:81.4,17:76.3,18:71.8,19:67.8,20:64.2,21:61,22:58.1,23:55.4,24:53,25:50.8,26:48.7,27:46.9,28:45.2,29:43.6,30:42.1,31:40.8,32:39.5,33:38.4,34:37.3,35:36.3},33:{15:87.6,16:81.8,17:76.8,18:72.3,19:68.3,20:64.7,21:61.4,22:58.5,23:55.8,24:53.4,25:51.2,26:49.1,27:47.2,28:45.5,29:43.9,30:42.5,31:41.1,32:39.9,33:38.7,34:37.7,35:36.7},34:{15:88.2,16:82.4,17:77.3,18:72.7,19:68.7,20:65.1,21:61.8,22:58.9,23:56.2,24:53.8,25:51.6,26:49.5,27:47.7,28:45.9,29:44.4,30:42.9,31:41.6,32:40.3,33:39.2,34:38.1,35:37.1},35:{15:88.7,16:82.9,17:77.8,18:73.2,19:69.2,20:65.6,21:62.3,22:59.3,23:56.7,24:54.2,25:52,26:50,27:48.1,28:46.4,29:44.8,30:43.3,31:42,32:40.8,33:39.6,34:38.6,35:37.6},36:{15:89.3,16:83.4,17:78.3,18:73.7,19:69.7,20:66.1,21:62.8,22:59.8,23:57.1,24:54.7,25:52.5,26:50.4,27:48.6,28:46.8,29:45.3,30:43.8,31:42.5,32:41.2,33:40.1,34:39.1,35:38.1},37:{15:89.9,16:84,17:78.9,18:74.3,19:70.2,20:66.6,21:63.3,22:60.3,23:57.6,24:55.2,25:53,26:50.9,27:49.1,28:47.4,29:45.8,30:44.3,31:43,32:41.8,33:40.6,34:39.6,35:38.6},38:{15:90.5,16:84.6,17:79.5,18:74.9,19:70.8,20:67.1,21:63.8,22:60.9,23:58.2,24:55.7,25:53.5,26:51.5,27:49.6,28:47.9,29:46.3,30:44.9,31:43.5,32:42.3,33:41.2,34:40.1,35:39.1},39:{15:91.2,16:85.3,17:80.1,18:75.5,19:71.4,20:67.7,21:64.4,22:61.4,23:58.7,24:56.3,25:54.1,26:52,27:50.2,28:48.5,29:46.9,30:45.5,31:44.1,32:42.9,33:41.8,34:40.7,35:39.8},40:{15:91.9,16:86,17:80.7,18:76.1,19:72,20:68.3,21:65,22:62.1,23:59.4,24:56.9,25:54.7,26:52.6,27:50.8,28:49.1,29:47.5,30:46.1,31:44.7,32:43.5,33:42.4,34:41.4,35:40.4},41:{15:92.7,16:86.7,17:81.4,18:76.8,19:72.7,20:69,21:65.7,22:62.7,23:60,24:57.6,25:55.3,26:53.3,27:51.4,28:49.7,29:48.2,30:46.7,31:45.4,32:44.2,33:43.1,34:42},42:{15:93.5,16:87.5,17:82.2,18:77.5,19:73.4,20:69.7,21:66.4,22:63.4,23:60.7,24:58.3,25:56,26:54,27:52.1,28:50.4,29:48.9,30:47.4,31:46.1,32:44.9,33:43.8},43:{15:94.3,16:88.3,17:83,18:78.3,19:74.2,20:70.5,21:67.1,22:64.2,23:61.5,24:59,25:56.8,26:54.7,27:52.9,28:51.2,29:49.6,30:48.2,31:46.9,32:45.7},44:{15:95.2,16:89.1,17:83.8,18:79.1,19:75,20:71.3,21:67.9,22:64.9,23:62.2,24:59.8,25:57.5,26:55.5,27:53.7,28:52,29:50.4,30:49,31:47.7},45:{15:96.1,16:90,17:84.7,18:80,19:75.9,20:72.1,21:68.8,22:65.8,23:63.1,24:60.6,25:58.4,26:56.3,27:54.5,28:52.8,29:51.2,30:49.8},46:{15:97.1,16:91,17:85.7,18:81,19:76.8,20:73,21:69.7,22:66.7,23:64,24:61.5,25:59.3,26:57.2,27:55.4,28:53.7,29:52.1},47:{15:98.2,16:92,17:86.7,18:81.9,19:77.7,20:74,21:70.6,22:67.8,23:64.9,24:62.4,25:60.2,26:58.1,27:56.3,28:54.6},48:{15:99.3,16:93.1,17:87.7,18:83,19:78.8,20:75,21:71.6,22:68.6,23:65.9,24:63.4,25:61.2,26:59.1,27:57.3},49:{15:100.4,16:94.2,17:88.8,18:84,19:79.8,20:76,21:72.7,22:69.6,23:66.9,24:64.4,25:62.2,26:60.2},50:{15:101.6,16:95.4,17:90,18:85.2,19:80.9,20:77.1,21:73.7,22:70.7,23:68,24:65.5,25:63.3}
};

const termRiderRates = {
    18:{15:1.83,16:1.83,17:1.83,18:1.83,19:1.83,20:1.83,21:1.83,22:1.83,23:1.83,24:1.83,25:1.83,26:1.83,27:1.83,28:1.86,29:1.89,30:1.93,31:1.97,32:2.01,33:2.06,34:2.11,35:2.16},
    19:{15:1.84,16:1.84,17:1.84,18:1.84,19:1.84,20:1.84,21:1.84,22:1.84,23:1.84,24:1.84,25:1.84,26:1.85,27:1.88,28:1.92,29:1.96,30:2,31:2.04,32:2.09,33:2.15,34:2.2,35:2.26},
    20:{15:1.85,16:1.85,17:1.85,18:1.85,19:1.85,20:1.85,21:1.85,22:1.85,23:1.85,24:1.85,25:1.87,26:1.91,27:1.94,28:1.98,29:2.03,30:2.08,31:2.13,32:2.19,33:2.25,34:2.31,35:2.38},
    21:{15:1.85,16:1.85,17:1.85,18:1.85,19:1.85,20:1.85,21:1.85,22:1.85,23:1.86,24:1.9,25:1.93,26:1.97,27:2.01,28:2.06,29:2.11,30:2.17,31:2.23,32:2.29,33:2.36,34:2.43,35:2.5},
    22:{15:1.85,16:1.85,17:1.85,18:1.85,19:1.85,20:1.85,21:1.85,22:1.88,23:1.92,24:1.96,25:2,26:2.05,27:2.1,28:2.15,29:2.21,30:2.27,31:2.34,32:2.41,33:2.48,34:2.56,35:2.64},
    23:{15:1.85,16:1.85,17:1.85,18:1.85,19:1.85,20:1.88,21:1.91,22:1.95,23:1.99,24:2.03,25:2.08,26:2.13,27:2.19,28:2.25,29:2.32,30:2.39,31:2.47,32:2.54,33:2.63,34:2.71,35:2.8},
    24:{15:1.85,16:1.85,17:1.85,18:1.87,19:1.9,20:1.94,21:1.98,22:2.02,23:2.07,24:2.12,25:2.18,26:2.24,27:2.3,28:2.37,29:2.45,30:2.53,31:2.61,32:2.7,33:2.79,34:2.88,35:2.97},
    25:{15:1.86,16:1.87,17:1.9,18:1.93,19:1.97,20:2.01,21:2.06,22:2.11,23:2.16,24:2.22,25:2.29,26:2.36,27:2.43,28:2.51,29:2.59,30:2.68,31:2.78,32:2.87,33:2.97,34:3.06,35:3.16},
    26:{15:1.9,16:1.93,17:1.97,18:2.01,19:2.05,20:2.1,21:2.15,22:2.21,23:2.27,24:2.34,25:2.42,26:2.5,27:2.58,28:2.67,29:2.76,30:2.86,31:2.96,32:3.06,33:3.17,34:3.27,35:3.37},
    27:{15:1.97,16:2.01,17:2.05,18:2.1,19:2.15,20:2.21,21:2.27,22:2.33,23:2.4,24:2.48,25:2.57,26:2.66,27:2.75,28:2.85,29:2.95,30:3.06,31:3.17,32:3.28,33:3.39,34:3.5,35:3.61},
    28:{15:2.06,16:2.1,17:2.15,18:2.2,19:2.26,20:2.33,21:2.4,22:2.47,23:2.56,24:2.64,25:2.74,26:2.84,27:2.95,28:3.05,29:3.17,30:3.28,31:3.4,32:3.51,33:3.63,34:3.75,35:3.86},
    29:{15:2.16,16:2.21,17:2.26,18:2.33,19:2.39,20:2.47,21:2.55,22:2.64,23:2.73,24:2.83,25:2.94,26:3.05,27:3.16,28:3.28,29:3.4,30:3.53,31:3.65,32:3.77,33:3.89,34:4.02,35:4.14},
    30:{15:2.27,16:2.33,17:2.4,18:2.47,19:2.55,20:2.63,21:2.73,22:2.83,23:2.93,24:3.04,25:3.16,26:3.28,27:3.41,28:3.54,29:3.67,30:3.8,31:3.93,32:4.06,33:4.19,34:4.32,35:4.45},
    31:{15:2.41,16:2.48,17:2.55,18:2.63,19:2.72,20:2.82,21:2.93,22:3.04,23:3.16,24:3.28,25:3.41,26:3.55,27:3.68,28:3.82,29:3.95,30:4.09,31:4.23,32:4.37,33:4.5,34:4.64,35:4.78},
    32:{15:2.56,16:2.64,17:2.73,18:2.83,19:2.93,20:3.04,21:3.16,22:3.29,23:3.42,24:3.55,25:3.69,26:3.84,27:3.98,28:4.13,29:4.27,30:4.42,31:4.56,32:4.71,33:4.85,34:5,35:5.14},
    33:{15:2.74,16:2.83,17:2.94,18:3.04,19:3.16,20:3.29,21:3.42,22:3.56,23:3.71,24:3.85,25:4.01,26:4.16,27:4.31,28:4.46,29:4.62,30:4.77,31:4.92,32:5.07,33:5.23,34:5.38,35:5.54},
    34:{15:2.95,16:3.06,17:3.17,18:3.3,19:3.43,20:3.57,21:3.72,22:3.87,23:4.03,24:4.19,25:4.35,26:4.51,27:4.67,28:4.83,29:4.99,30:5.15,31:5.31,32:5.48,33:5.64,34:5.8,35:5.97},
    35:{15:3.19,16:3.31,17:3.44,18:3.58,19:3.73,20:3.89,21:4.05,22:4.21,23:4.38,24:4.55,25:4.72,26:4.89,27:5.06,28:5.23,29:5.4,30:5.57,31:5.74,32:5.91,33:6.09,34:6.26,35:6.44},
    36:{15:3.46,16:3.6,17:3.75,18:3.9,19:4.07,20:4.24,21:4.41,22:4.59,23:4.77,24:4.95,25:5.13,26:5.31,27:5.49,28:5.67,29:5.85,30:6.02,31:6.21,32:6.39,33:6.57,34:6.76,35:6.95},
    37:{15:3.77,16:3.92,17:4.09,18:4.26,19:4.45,20:4.63,21:4.82,22:5.01,23:5.2,24:5.39,25:5.57,26:5.76,27:5.95,28:6.14,29:6.33,30:6.52,31:6.71,32:6.91,33:7.1,34:7.3,35:7.5},
    38:{15:4.12,16:4.29,17:4.48,18:4.67,19:4.86,20:5.06,21:5.26,22:5.46,23:5.66,24:5.86,25:6.06,26:6.26,27:6.45,28:6.65,29:6.85,30:7.06,31:7.26,32:7.47,33:7.68,34:7.89,35:8.11},
    39:{15:4.52,16:4.71,17:4.91,18:5.12,19:5.32,20:5.53,21:5.74,22:5.95,23:6.16,24:6.37,25:6.58,26:6.79,27:7,28:7.21,29:7.42,30:7.64,31:7.86,32:8.08,33:8.3,34:8.53,35:8.76},
    40:{15:4.96,16:5.17,17:5.39,18:5.61,19:5.83,20:6.05,21:6.27,22:6.49,23:6.71,24:6.93,25:7.15,26:7.37,27:7.59,28:7.82,29:8.04,30:8.27,31:8.51,32:8.74,33:8.98,34:9.23,35:9.47},
    41:{15:5.46,16:5.69,17:5.92,18:6.15,19:6.38,20:6.61,21:6.84,22:7.07,23:7.3,24:7.54,25:7.77,26:8,27:8.24,28:8.48,29:8.72,30:8.97,31:9.21,32:9.47,33:9.72,34:9.98},
    42:{15:5.99,16:6.23,17:6.48,18:6.72,19:6.96,20:7.21,21:7.45,22:7.69,23:7.93,24:8.18,25:8.42,26:8.67,27:8.92,28:9.18,29:9.44,30:9.7,31:9.97,32:10.24,33:10.51},
    43:{15:6.57,16:6.83,17:7.08,18:7.34,19:7.59,20:7.85,21:8.1,22:8.36,23:8.61,24:8.87,25:9.13,26:9.4,27:9.67,28:9.94,29:10.22,30:10.5,31:10.79,32:11.07},
    44:{15:7.21,16:7.48,17:7.74,18:8.01,19:8.27,20:8.54,21:8.81,22:9.08,23:9.35,24:9.62,25:9.9,26:10.19,27:10.47,28:10.77,29:11.07,30:11.37,31:11.67},
    45:{15:7.9,16:8.18,17:8.45,18:8.73,19:9.01,20:9.29,21:9.57,22:9.85,23:10.14,24:10.44,25:10.74,26:11.04,27:11.35,28:11.66,29:11.98,30:12.31},
    46:{15:8.64,16:8.93,17:9.22,18:9.51,19:9.8,20:10.09,21:10.39,22:10.69,23:11,24:11.32,25:11.64,26:11.97,27:12.3,28:12.64,29:12.98},
    47:{15:9.44,16:9.74,17:10.04,18:10.34,19:10.65,20:10.96,21:11.28,22:11.6,23:11.93,24:12.27,25:12.62,26:12.97,27:13.32,28:13.68},
    48:{15:10.29,16:10.6,17:10.92,18:11.24,19:11.56,20:11.89,21:12.23,22:12.58,23:12.94,24:13.3,25:13.67,26:14.05,27:14.43},
    49:{15:11.19,16:11.52,17:11.85,18:12.19,19:12.54,20:12.9,21:13.26,22:13.63,23:14.02,24:14.41,25:14.81,26:15.21},
    50:{15:12.15,16:12.5,17:12.85,18:13.21,19:13.59,20:13.97,21:14.36,22:14.76,23:15.18,24:15.6,25:16.03}
};

const modalFactors = { yly:1, hly:0.50536, qly:0.25536, mly:0.085120 };
const modeRebate = { yly:0.02, hly:0, qly:0, mly:0 };
const gstFirst = 1.045;
const gstSecond = 1.0225;

function formatINR(val) {
  return "â‚¹ " + Math.round(val).toLocaleString("en-IN");
}

function calculate() {
    const sa = parseInt(document.getElementById("sumAssured").value);
    const age = parseInt(document.getElementById("age").value);
    const term = parseInt(document.getElementById("term").value);
    document.getElementById("ppt").value = term + " Years";

    const rate = premiumRates[age]?.[term];
    if (!rate) {
        document.getElementById("results").innerHTML = `<p style="color:red; text-align:center;">No rate available for this age and term combination.</p>`;
        return;
    }

    let basePrem = (sa / 1000) * rate;

      // Get the state of the DAB checkbox
    const isDabChecked = document.getElementById('dab').checked;

    // SA Rebate Calculation based on DAB selection
    let saRebateRate = 0;
    if (isDabChecked) {
        // --- Rebate rates WHEN DAB IS SELECTED (Your existing rates) ---
        if (sa >= 10000000) saRebateRate = 4.132;
        else if (sa >= 5000000) saRebateRate = 4.132;
        else if (sa >= 2000000) saRebateRate = 4.130;
        else if (sa >= 1000000) saRebateRate = 4.130;
        else if (sa >= 500000) saRebateRate = 2.600;
    } else {
        // --- <<< SET YOUR NEW REBATE RATES HERE WHEN DAB IS NOT SELECTED >>> ---
        if (sa >= 10000000) {
            saRebateRate = 4.132; // Example new rate for SA >= 1 Crore
        } else if (sa >= 5000000) {
            saRebateRate = 4.132; // Example new rate for SA >= 50 Lakh
        } else if (sa >= 2000000) {
            saRebateRate = 4.13; // Example new rate for SA >= 20 Lakh
        } else if (sa >= 1000000) {
            saRebateRate = 4.13; // Example new rate for SA >= 10 Lakh
        } else if (sa >= 500000) {
            saRebateRate = 2.60; // Example new rate for SA >= 5 Lakh
        }
    }

    let saRebate = (sa / 1000) * saRebateRate;
    let afterSaRebate = basePrem - saRebate;

    let yearlyPrem = afterSaRebate - (afterSaRebate * modeRebate.yly);

    let dabPremium = 0;
    if (document.getElementById("dab").checked) {
        const dabSa = Math.min(sa, 10000000);
        dabPremium = (dabSa / 1000) * 1.00;
    }

    let netAnnual = yearlyPrem + dabPremium;

    const result = {};
    for (let m of ["yly","hly","qly","mly"]) {
        let modalPrem = netAnnual * modalFactors[m];
        result[m] = {
            first: formatINR(modalPrem * gstFirst),
            second: formatINR(modalPrem * gstSecond)
        };
    }

    document.getElementById("results").innerHTML = `
    <h2>Premium Summary</h2>
    <table>
        <tr><th>Mode</th><th>1st Year (incl. GST)</th><th>2nd Year Onwards (incl. GST)</th></tr>
        <tr><td>Yearly</td><td>${result.yly.first}</td><td>${result.yly.second}</td></tr>
        <tr><td>Half-Yearly</td><td>${result.hly.first}</td><td>${result.hly.second}</td></tr>
        <tr><td>Quarterly</td><td>${result.qly.first}</td><td>${result.qly.second}</td></tr>
        <tr><td>Monthly</td><td>${result.mly.first}</td><td>${result.mly.second}</td></tr>
    </table>`;
}

// --- Rider and Modal Logic ---
const modal = document.getElementById('premium-modal');
const modalTitle = document.getElementById('modal-title');
const modalBody = document.getElementById('modal-body');
const closeModalBtn = document.querySelector('.modal-close-btn');

function showModal(title, bodyHtml) {
    modalTitle.innerHTML = title;
    modalBody.innerHTML = bodyHtml;
    modal.style.display = 'flex';
}

function hideModal() {
    modal.style.display = 'none';
}

closeModalBtn.addEventListener('click', hideModal);
window.addEventListener('click', (event) => {
    if (event.target === modal) {
        hideModal();
    }
});

document.getElementById('term-rider-btn').addEventListener('click', () => {
    const baseSa = parseInt(document.getElementById("sumAssured").value);
    
    const title = 'Term Rider Premium Calculator';
    const bodyHtml = `
        <label for="proposerAge" style="display:block; margin-bottom:5px; font-weight:bold;">Enter Proposer's Age</label>
        <input type="number" id="proposerAge" style="width: 100%; padding: 8px; margin-bottom: 15px; box-sizing: border-box;" min="18" value="30" />

        <label for="termRiderSA" style="display:block; margin-bottom:5px; font-weight:bold;">Term Rider Sum Assured</label>
        <p style="font-size:0.8em; color:#555; margin-top:0;">(Cannot exceed Base SA of ${formatINR(baseSa)})</p>
        <input type="number" id="termRiderSA" style="width: 100%; padding: 8px; margin-bottom: 20px; box-sizing: border-box;" value="${baseSa}" />
        
        <button onclick="calculateTermRiderFromModal()" class="rider-btn" style="width:100%;">Calculate Rider Premium</button>
    `;
    showModal(title, bodyHtml);
});

function calculateTermRiderFromModal() {
    const proposerAge = parseInt(document.getElementById('proposerAge').value);
    const term = parseInt(document.getElementById("term").value);
    const baseSumAssured = parseInt(document.getElementById("sumAssured").value);
    const termRiderSumAssured = parseInt(document.getElementById('termRiderSA').value);

    if (isNaN(proposerAge) || proposerAge < 18) {
        showModal('Error', '<p style="color:red;">Please enter a valid Proposer Age (18+).</p>');
        return;
    }

    if (isNaN(termRiderSumAssured) || termRiderSumAssured <= 0) {
        showModal('Error', '<p style="color:red;">Please enter a valid Term Rider Sum Assured.</p>');
        return;
    }
    
    if (termRiderSumAssured > baseSumAssured) {
        showModal('Validation Error', `<p style="color:red;">Term Rider Sum Assured cannot be greater than the Base Sum Assured of ${formatINR(baseSumAssured)}.</p>`);
        return;
    }
    
    // Using proposerAge for lookup in termRiderRates table
    const termRiderRate = termRiderRates[proposerAge]?.[term];
    
    if (!termRiderRate || termRiderRate === 0) {
        showModal('Term Rider Premium', '<p style="color:red;">Term Rider is not available for the selected Age/Term combination.</p>');
        return;
    }

    const termRiderPremium = (termRiderSumAssured / 1000) * termRiderRate;
    const termRiderPremiumWithGst = termRiderPremium * 1.18; // 18% GST

    const resultHtml = `
        <p style="font-size: 1.4em; font-weight: bold; color: #333;">
            Yearly Premium: ${formatINR(termRiderPremiumWithGst)}
        </p>
        <small>(For Rider SA of ${formatINR(termRiderSumAssured)}, inclusive of 18% GST)</small>
    `;
    showModal('Standalone Term Rider Premium', resultHtml);
}
</script>

<div style="margin-top: 20px; font-size: 0.9em; color: #555; text-align: center;">
  <strong>Disclaimer:</strong> The premium amounts calculated here are for indicative purposes only. Actual premiums may vary based on LICâ€™s official rates, underwriting guidelines, and policy terms. Please consult an authorized LIC agent or branch for the exact premium payable.
</div>
</body>
</html>