<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIC Jeevan Umang (Plan 745) Premium Calculator</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f4f7f9; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { background-color: #fff; padding: 25px 30px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); max-width: 600px; width: 100%; }
        h1 { color: #005691; text-align: center; margin-top: 0; margin-bottom: 25px; border-bottom: 2px solid #e0e0e0; padding-bottom: 15px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; color: #333; margin-bottom: 8px; }
        input[type="number"], select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px; box-sizing: border-box; }
        .checkbox-group { display: flex; align-items: center; gap: 10px; }
        input[type="checkbox"] { width: 18px; height: 18px; }
        button { width: 100%; padding: 12px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 18px; font-weight: bold; cursor: pointer; transition: background-color 0.3s; }
        button:hover { background-color: #0056b3; }
        #results { margin-top: 25px; display: none; }
        .results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .result-card { background-color: #f9f9f9; padding: 15px; border-radius: 5px; border-left: 4px solid #007bff; }
        .result-card h3 { margin-top: 0; color: #007bff; font-size: 1rem; }
        .result-card p { margin: 5px 0; font-size: 1rem; color: #555; }
        .result-card p span { font-weight: bold; color: #333; }
        #error-message { color: #d93025; background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 10px; border-radius: 5px; margin-top: 20px; display: none; text-align: center; }
    </style>
</head>
<body>

<div class="container">
    <h1>LIC Jeevan Umang (Plan 745)</h1>
    <form id="premium-form" onsubmit="return false;">
        <div class="form-group">
            <label for="age">Age at Entry (Nearest Birthday)</label>
            <input type="number" id="age" min="0" max="55" value="30" required>
        </div>
        <div class="form-group">
            <label for="sum-assured">Basic Sum Assured</label>
            <input type="number" id="sum-assured" min="200000" step="10000" value="500000" required>
        </div>
        <div class="form-group">
            <label for="ppt">Premium Paying Term (PPT)</label>
            <select id="ppt" required>
                <option value="15">15 Years</option>
                <option value="20" selected>20 Years</option>
                <option value="25">25 Years</option>
                <option value="30">30 Years</option>
            </select>
        </div>
        <div class="form-group checkbox-group">
            <input type="checkbox" id="addb-rider" checked>
            <label for="addb-rider" style="margin-bottom: 0;">Include Accidental Benefit (ADDB) Rider?</label>
        </div>
        <button type="button" onclick="calculatePremium()">Calculate Premium</button>
    </form>
    <div id="error-message"></div>
    <div id="results" class="mt-4 d-none">
        <hr>
        <div class="result-card mb-3" style="border-color: #28a745;">
             <p class="mb-1"><strong>Policy Term:</strong> <span id="output-term"></span></p>
             <p class="mb-0"><strong>Annual Survival Benefit (after PPT):</strong> <span id="output-survival-benefit"></span></p>
        </div>
        <div id="premium-results" class="results-grid"></div>
    </div>
</div>

<script>
    // --- DATA STORE (UNCHANGED) ---
    const tp745Data = [ {"Age":0,"T15":0,"T20":58.2,"T25":43.4,"T30":34.3},{"Age":1,"T15":0,"T20":58.2,"T25":43.4,"T30":34.3},{"Age":2,"T15":0,"T20":58.2,"T25":43.4,"T30":34.3},{"Age":3,"T15":84.4,"T20":58.2,"T25":43.4,"T30":34.3},{"Age":4,"T15":84.4,"T20":58.2,"T25":43.4,"T30":34.3},{"Age":5,"T15":84.4,"T20":58.2,"T25":43.4,"T30":34.3},{"Age":6,"T15":84.4,"T20":58.2,"T25":43.4,"T30":34.35},{"Age":7,"T15":84.4,"T20":58.2,"T25":43.4,"T30":34.4},{"Age":8,"T15":84.4,"T20":58.2,"T25":43.4,"T30":34.45},{"Age":9,"T15":84.4,"T20":58.2,"T25":43.4,"T30":34.5},{"Age":10,"T15":84.4,"T20":58.2,"T25":43.45,"T30":34.55},{"Age":11,"T15":84.4,"T20":58.2,"T25":43.5,"T30":34.6},{"Age":12,"T15":84.4,"T20":58.2,"T25":43.5,"T30":34.65},{"Age":13,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.7},{"Age":14,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.7},{"Age":15,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.75},{"Age":16,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.8},{"Age":17,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.8},{"Age":18,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.85},{"Age":19,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.85},{"Age":20,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.9},{"Age":21,"T15":84.4,"T20":58.2,"T25":43.55,"T30":34.95},{"Age":22,"T15":84.4,"T20":58.2,"T25":43.55,"T30":35},{"Age":23,"T15":84.4,"T20":58.2,"T25":43.55,"T30":35.05},{"Age":24,"T15":84.4,"T20":58.2,"T25":43.55,"T30":35.1},{"Age":25,"T15":84.4,"T20":58.2,"T25":43.55,"T30":35.2},{"Age":26,"T15":84.4,"T20":58.2,"T25":43.6,"T30":35.3},{"Age":27,"T15":84.4,"T20":58.2,"T25":43.65,"T30":35.4},{"Age":28,"T15":84.4,"T20":58.2,"T25":43.7,"T30":35.55},{"Age":29,"T15":84.4,"T20":58.2,"T25":43.75,"T30":35.7},{"Age":30,"T15":84.4,"T20":58.2,"T25":43.85,"T30":35.85},{"Age":31,"T15":84.4,"T20":58.2,"T25":43.95,"T30":36.05},{"Age":32,"T15":84.4,"T20":58.2,"T25":44.1,"T30":36.25},{"Age":33,"T15":84.4,"T20":58.2,"T25":44.25,"T30":36.5},{"Age":34,"T15":84.4,"T20":58.2,"T25":44.45,"T30":36.8},{"Age":35,"T15":84.4,"T20":58.2,"T25":44.65,"T30":37.1},{"Age":36,"T15":84.4,"T20":58.2,"T25":44.85,"T30":37.4},{"Age":37,"T15":84.4,"T20":58.2,"T25":45.1,"T30":37.75},{"Age":38,"T15":84.4,"T20":58.2,"T25":45.4,"T30":38.15},{"Age":39,"T15":84.4,"T20":58.3,"T25":45.75,"T30":38.6},{"Age":40,"T15":84.4,"T20":58.55,"T25":46.1,"T30":39.1},{"Age":41,"T15":84.4,"T20":58.8,"T25":46.5,"T30":0},{"Age":42,"T15":84.4,"T20":59.1,"T25":46.95,"T30":0},{"Age":43,"T15":84.4,"T20":59.45,"T25":47.45,"T30":0},{"Age":44,"T15":84.4,"T20":59.8,"T25":47.95,"T30":0},{"Age":45,"T15":84.4,"T20":60.25,"T25":48.55,"T30":0},{"Age":46,"T15":84.4,"T20":60.7,"T25":0,"T30":0},{"Age":47,"T15":84.4,"T20":61.2,"T25":0,"T30":0},{"Age":48,"T15":84.4,"T20":61.8,"T25":0,"T30":0},{"Age":49,"T15":84.4,"T20":62.4,"T25":0,"T30":0},{"Age":50,"T15":84.5,"T20":63.1,"T25":0,"T30":0},{"Age":51,"T15":84.95,"T20":0,"T25":0,"T30":0},{"Age":52,"T15":85.45,"T20":0,"T25":0,"T30":0},{"Age":53,"T15":86,"T20":0,"T25":0,"T30":0},{"Age":54,"T15":86.6,"T20":0,"T25":0,"T30":0},{"Age":55,"T15":87.2,"T20":0,"T25":0,"T30":0} ];
      const addb745Data = [ {"Age":15,"T15":1,"T20":1.3,"T25":1.25,"T30":1.20},{"Age":16,"T15":1.05,"T20":1.25,"T25":1.30,"T30":1.35},{"Age":17,"T15":1.1,"T20":1.3,"T25":1.35,"T30":1.40},{"Age":18,"T15":1.70,"T20":1.45,"T25":1.30,"T30":1.20},{"Age":19,"T15":1.70,"T20":1.45,"T25":1.3,"T30":1.2},{"Age":20,"T15":1.70,"T20":1.45,"T25":1.3,"T30":1.2},{"Age":21,"T15":1.70,"T20":1.45,"T25":1.3,"T30":1.2},{"Age":22,"T15":1.70,"T20":1.40,"T25":1.25,"T30":1.2},{"Age":23,"T15":1.7,"T20":1.40,"T25":1.25,"T30":1.15},{"Age":24,"T15":1.70,"T20":1.4,"T25":1.25,"T30":1.15},{"Age":25,"T15":1.65,"T20":1.40,"T25":1.25,"T30":1.15},{"Age":26,"T15":1.65,"T20":1.40,"T25":1.25,"T30":1.15},{"Age":27,"T15":1.65,"T20":1.40,"T25":1.25,"T30":1.15},{"Age":28,"T15":1.65,"T20":1.4,"T25":1.25,"T30":1.15},{"Age":29,"T15":1.65,"T20":1.35,"T25":1.2,"T30":1.15},{"Age":30,"T15":1.60,"T20":1.35,"T25":1.2,"T30":1.10},{"Age":31,"T15":1.60,"T20":1.35,"T25":1.2,"T30":1.10},{"Age":32,"T15":1.60,"T20":1.35,"T25":1.20,"T30":1.10},{"Age":33,"T15":1.60,"T20":1.35,"T25":1.20,"T30":1.10},{"Age":34,"T15":1.55,"T20":1.30,"T25":1.2,"T30":1.10},{"Age":35,"T15":1.55,"T20":1.30,"T25":1.15,"T30":1.1},{"Age":36,"T15":1.55,"T20":1.30,"T25":1.15,"T30":1.05},{"Age":37,"T15":1.50,"T20":1.30,"T25":1.15,"T30":1.05},{"Age":38,"T15":1.5,"T20":1.25,"T25":1.15,"T30":1.05},{"Age":39,"T15":1.5,"T20":1.25,"T25":1.1,"T30":1.05},{"Age":40,"T15":1.45,"T20":1.25,"T25":1.10,"T30":1.0},{"Age":41,"T15":1.45,"T20":1.20,"T25":1.1,"T30":1.15},{"Age":42,"T15":1.45,"T20":1.20,"T25":1.05,"T30":1.15},{"Age":43,"T15":1.40,"T20":1.20,"T25":1.05,"T30":1.15},{"Age":44,"T15":1.40,"T20":1.15,"T25":1.05,"T30":1.15},{"Age":45,"T15":1.35,"T20":1.15,"T25":1.0,"T30":"1.15"},{"Age":46,"T15":1.35,"T20":1.10,"T25":1.25,"T30":"1.15"},{"Age":47,"T15":1.30,"T20":1.10,"T25":1.25,"T30":"1.15"},{"Age":48,"T15":1.25,"T20":1.05,"T25":1.25,"T30":1.2},{"Age":49,"T15":1.25,"T20":1.05,"T25":1.3,"T30":1.2},{"Age":50,"T15":1.2,"T20":1.00,"T25":1.3,"T30":1.2},{"Age":51,"T15":1.20,"T20":1.55,"T25":1.3,"T30":1.2},{"Age":52,"T15":1.15,"T20":1.55,"T25":1.3,"T30":1.2} ];
    
    const baseRates = tp745Data.reduce((acc, item) => {
        acc[item.Age] = { 15: item.T15, 20: item.T20, 25: item.T25, 30: item.T30 };
        return acc;
    }, {});

    const addbRates = addb745Data.reduce((acc, item) => {
        acc[item.Age] = { 15: parseFloat(item.T15) || 0, 20: parseFloat(item.T20) || 0, 25: parseFloat(item.T25) || 0, 30: parseFloat(item.T30) || 0 };
        return acc;
    }, {});

function calculatePremium() {
    const errorDiv = document.getElementById('error-message');
    const resultsDiv = document.getElementById('results');
    errorDiv.style.display = 'none';
    resultsDiv.style.display = 'none';

    const age = parseInt(document.getElementById('age').value);
    const sumAssured = parseFloat(document.getElementById('sum-assured').value);
    const ppt = parseInt(document.getElementById('ppt').value);
    const includeAddbRider = document.getElementById('addb-rider').checked;

    if (!validateInputs(age, sumAssured, ppt)) return;
    const tabularRate = baseRates[age]?.[ppt];
    if (!tabularRate || tabularRate <= 0) {
        showError(`This combination of Age (${age}) and PPT (${ppt}) is not available.`);
        return;
    }

    const annualTabularPremium = Math.round((sumAssured / 1000) * tabularRate);
    const saRebateRatePerThousand = getHighSaRebateRate(sumAssured);
    const annualSaRebateAmount = Math.round((sumAssured / 1000) * saRebateRatePerThousand);

    let annualAddbPremium = 0;
    if (includeAddbRider && age >= 18) {
        const addbRate = addbRates[age]?.[ppt];
        if (addbRate && addbRate > 0) {
            const addbSumAssured = Math.min(sumAssured, 10000000);
            annualAddbPremium = Math.round((addbSumAssured / 1000) * addbRate);
        }
    }

    const policyTerm = 100 - age;
    document.getElementById('output-term').textContent = `${policyTerm} Years`;
    document.getElementById('output-survival-benefit').textContent = `₹ ${new Intl.NumberFormat('en-IN').format(Math.round(sumAssured * 0.08))}`;

    const modes = {
        yearly:      { name: "Yearly", factor: 1.0, modeRebatePercent: 0.02 },
        "half-yearly": { name: "Half-Yearly", factor: 0.500, modeRebatePercent: 0.01 },
        quarterly:   { name: "Quarterly", factor: 0.2500, modeRebatePercent: 0 },
        monthly:     { name: "Monthly", factor: 0.0833, modeRebatePercent: 0 }
    };

    let resultsHTML = '';
    for (const modeKey in modes) {
        const mode = modes[modeKey];

        const modeRebateAmount = Math.round(annualTabularPremium * mode.modeRebatePercent);
        const netAnnualPremium = Math.round(annualTabularPremium - annualSaRebateAmount - modeRebateAmount);
        const baseInstalmentPremium = Math.round(netAnnualPremium * mode.factor);
        const addbInstalmentPremium = Math.round(annualAddbPremium * mode.factor);
        const totalInstalmentPremiumBeforeTax = Math.round(baseInstalmentPremium + addbInstalmentPremium);

        const finalPremium1stYear = Math.round(totalInstalmentPremiumBeforeTax * 1.045);
        const finalPremium2ndYear = Math.round(totalInstalmentPremiumBeforeTax * 1.0225);

        const formatInr = (num) => `₹ ${new Intl.NumberFormat('en-IN').format(num)}`;

        resultsHTML += `
            <div class="result-card">
                <h3>${mode.name} Mode</h3>
                <p>1st Year Premium: <span>${formatInr(finalPremium1stYear)}</span></p>
                <p>2nd Year Onwards: <span>${formatInr(finalPremium2ndYear)}</span></p>
            </div>
        `;
    }

    document.getElementById('premium-results').innerHTML = resultsHTML;
    resultsDiv.style.display = 'block';
}


    // --- Helper functions ---

    function getHighSaRebateRate(sumAssured) {
        // This function returns the FLAT RATE REBATE per 1000 SA as per the brochure on page 6.
        if (sumAssured >= 2500000) { // 25 Lakhs and above
            return 4.00;
        } else if (sumAssured >= 1000000) { // 10 Lakhs to 24,99,999
            return 3.50;
        } else if (sumAssured >= 500000) { // 5 Lakhs to 9,99,999
            return 2.50;
        }
        return 0; // Nil rebate for sums below 5,00,000
    }
    
    function validateInputs(age, sumAssured, ppt) {
        const errorDiv = document.getElementById('error-message');
        if (isNaN(age) || isNaN(sumAssured) || isNaN(ppt)) {
            showError("Please fill all required fields."); return false;
        }
        if (sumAssured < 200000) {
            showError("Minimum Sum Assured is ₹2,00,000."); return false;
        }
        // Validation for Sum Assured multiples from brochure page 2
        if (sumAssured > 900000 && sumAssured % 100000 !== 0) {
            showError("For SA above 9 Lakhs, amount must be in multiples of 1,00,000."); return false;
        }
        if (sumAssured > 450000 && sumAssured <= 900000 && sumAssured % 50000 !== 0) {
            showError("For SA between 4.5 Lakhs and 9 Lakhs, amount must be in multiples of 50,000."); return false;
        }
        if (sumAssured >= 200000 && sumAssured <= 450000 && sumAssured % 25000 !== 0) {
            showError("For SA up to 4.5 Lakhs, amount must be in multiples of 25,000."); return false;
        }
        
        const maxEntryAgeMap = { 15: 55, 20: 50, 25: 45, 30: 40 };
        if (age > maxEntryAgeMap[ppt]) {
            showError(`Maximum entry age for ${ppt} year PPT is ${maxEntryAgeMap[ppt]} years.`); return false;
        }
        const ageAtPptEnd = age + ppt;
        if (age > 0 && (ageAtPptEnd < 30 || ageAtPptEnd > 70)) { // age>0 check to allow infant policies
            showError(`Age at the end of PPT must be between 30 and 70. Your combination results in age ${ageAtPptEnd}.`); return false;
        }
        return true;
    }

    function showError(message) {
        const errorDiv = document.getElementById('error-message');
        errorDiv.textContent = message;
        errorDiv.style.display = 'block';
    }
</script>

</body>
</html>